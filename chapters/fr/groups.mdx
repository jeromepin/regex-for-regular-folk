---
title: Groupes
---

Les groupes, comme le nom le suggère, sont utilisés pour "grouper" différents composants d'une expression régulière. Ces groupes peuvent être utilisés pour :

-   Extraire des sous-sélections au sein des correspondances
-   [Répétez des groupes un nombre arbitraire de fois](repetition)
-   Référez des sous-chaînes de caractères qui ont été capturées précédemment
-   Amélioriez la lisibilité 
-   [Permettre des alternances complexes](alternation)

Nous allons explorer ces différents aspects dans les prochains chapitres mais comprendre comment les groupes fonctionnent nous permettra d'étudier quelques chouettes exemples dans ces prochaines chapitres.

## Groupes de capture

Les groupes de capture se dénotent via `(` … `)`. Voici un exemple éloquent :

<Example regex={/a(bcd)e/g}>
    <li>abcde</li>
    <li>abcdefg?</li>
    <li>abcde</li>
</Example>

Les groupes de capture permettent _d'extraire_ des parties de correspondances.

<Example regex={/\{([^{}]*)\}/g}>
    <li>{"{braces}"}</li>
    <li>{"{two} {pairs}"}</li>
    <li>{"{ {nested} }"}</li>
    <li>{"{ incomplete } }"}</li>
    <li>{"{}"}</li>
    <li>{"{unmatched"}</li>
</Example>

En utilisant les functions _regex_ de votre langage de programmation, vous devriez être capable d'extraire le texte entre les accolades pour chacune de ces chaines de caractères.

Les groupes de capture peuvent également utiliser pour regrouper les parties d'une expression régulière pour faciliter la [répétition](/repetition) de ces parties. Bien que nous allons couvrir la notion de répétition dans les chapitres à venir, voici un example pour illustrer l'utilité des groupes dans ce cadre.

<Example regex={/a(bcd)+e/g}>
    <li>abcdefg</li>
    <li>abcdbcde</li>
    <li>abcdbcdbcdef</li>
    <li>ae</li>
</Example>

On peut également utiliser les groupes pour regrouper les parties des regex ayant une logique similaire pour améliorer la lisiblité.

<Example regex={/(\d\d\d\d)-W(\d\d)/g}>
    <li>2020-W12</li>
    <li>1970-W01</li>
    <li>2050-W50-6</li>
    <li>12050-W50</li>
</Example>

### Références arrières

Les références arrières permettent de référencer des _sous-chaines de caractères capturés précédemment_.

La correspondance du premier groupe serait `\1`, alors que le second serait `\2` et ainsi de suite…

<Example regex={/([abc])=\1=\1/g}>
    <li>a=a=a</li>
    <li>ab=b=b</li>
    <li>a=b=c</li>
</Example>

Les références arrières _ne peuvent pas_ être utiliser pour réduire les duplications dans les expressions régulières. Il référence _la capture_ des groups et non des motifs.

<Example regex={/[abc][abc][abc]/g}>
    <li>abc</li>
    <li>a cable</li>
    <li>aaa</li>
    <li>bbb</li>
    <li>ccc</li>
</Example>

<Example regex={/([abc])\1\1/g}>
    <li>abc</li>
    <li>a cable</li>
    <li>aaa</li>
    <li>bbb</li>
    <li>ccc</li>
</Example>

Voici un exemple illustrant une utilisation commune :

<Example regex={/\w+([,|])\w+\1\w+/g}>
    <li>comma,separated,values</li>
    <li>pipe|separated|values</li>
    <li>wb|mixed,delimiters</li>
    <li>wb,mixed|delimiters</li>
</Example>

On peut pas arriver au résultat voulu en utilisant une classe de caractères répétée.

<Example regex={/\w+[,|]\w+[,|]\w+/g}>
    <li>comma,separated,values</li>
    <li>pipe|separated|values</li>
    <li>wb|mixed,delimiters</li>
    <li>wb,mixed|delimiters</li>
</Example>

## Groupes non-capturant

Les groupes non-capturant sont similaires aux groupes de capture à l'expception qu'ils ne "capturent" rien. Ils prennent la forme `(?:` … `)`.

Les groupes non-capturant sont usuellement utilisés en conjonction avec des groupes de capture. Peut-être que vous souhaitez extraire certaines parties des correspondances en utilisant des groupes de captures. Vous souhaitez peut-être d'utiliser un groupe _sans modifier l'ordre des captures_. C'est à ce moment-là que les groupes non-capturant deviennent utiles.

## Exemples 

### Extraire les paramètres d'une requête de recherche

<Example regex={/^\?(\w+)=(\w+)(?:&(\w+)=(\w+))*$/g}>
    <li></li>
    <li>?</li>
    <li>?a=b</li>
    <li>?a=b&foo=bar</li>
</Example>

On capture la première paire clef-valeur séparement afin de pouvoir utiliser `&`, le séparateur, comme faisant par du groupe répété.

### (Basiques) balises HTML

En règle générale, _n'utilise pas_ des expressions régulières pour capturer des balises XML/HTML.[^1][^2][^3][^4]

Toutefois, voici un exemple pertinent : 

<Example regex={/<([a-z]+)+>(.*)<\/\1>/gi}>
    <li>{"<p>paragraph</p>"}</li>
    <li>{"<li>list item</li>"}</li>
    <li>{"<p><span>nesting</span></p>"}</li>
    <li>{"<p>hmm</li>"}</li>
    <li>{"<p><p>not clever</p></p></p>"}</li>
</Example>

[^1]: https://stackoverflow.com/a/590789
[^2]: https://stackoverflow.com/a/6751339
[^3]: https://blog.codinghorror.com/parsing-html-the-cthulhu-way/
[^4]: https://web.archive.org/web/20071018202901/http://oubliette.alpha-geek.com/2004/01/12/bring_me_your_regexs_i_will_create_html_to_break_them

### Noms

**Trouve**: `\b(\w+) (\w+)\b`

**Remplace**: `$2, $1`[^5]

#### Avant

```
John Doe
Jane Doe
Sven Svensson
Janez Novak
Janez Kranjski
Tim Joe
```

#### Après

```
Doe, John
Doe, Jane
Svensson, Sven
Novak, Janez
Kranjski, Janez
Joe, Tim
```

[^5]: Dans des contextes de remplacement, `$1`, `$2`, … sont généralement utilisés au lieu de `\1`, `\2`, … pour se référer aux chaines de caractères capturées.

### Références arrières et pluriels

**Trouve** : `\bword(s?)\b`

**Remplace** : `phrase$1`[^5]

#### Avant

```
This is a paragraph with some words.

Some instances of the word "word" are in their plural form: "words".

Yet, some are in their singular form: "word".
```

#### Après

```
This is a paragraph with some phrases.

Some instances of the phrase "phrase" are in their plural form: "phrases".

Yet, some are in their singular form: "phrase".
```
